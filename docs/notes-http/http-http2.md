---
title: HTTP2的优势 
---

## 前言

HTTP2.0的出现，相比于HTTP1.x，大幅度提升了Web性能，在语义完全兼容的基础上，进一步减少了网络的延迟。对于前端开发人员来说，减少了很多优化工作。

## 多路复用

多路复用允许同时通过单一的HTTP/2连接发起多重的请求-响应消息。

在HTTP/1.1协议中，浏览器客户端在同一时间内，针对统一域名下的请求有一定的数量限制。超过限制数目的请求会发生阻塞。

**CDN域名加速的目的就是变相的解决浏览器对同一域名的请求阻塞问题。**

## 二进制分帧

在语义完全兼容的前提下，HTTP/2是如何做到突破性能限制，改进传输性能，实现低延迟和高吞吐量的？

关键就是在应用层（HTTP/2）和传输层（TCP/UDP）之间增加的一个二进制数据分帧层。在二进制分帧层中，HTTP/2会将所有的传输信息分割为更小的消息和帧，并采用二进制格式的编码。其中HTTP/1.x的首部信息会封装到HEADER frame，而相应的Request Body会封装到 DATA frame里面去。

HTTP/2的通信都在一个连接上完成，这个连接可以承载任意数量的双向数据流。

**总结：**

- 单连接多资源的方式，减少服务端的连接压力，内存占用更少，连接吞吐量更大

- 由于TCP连接的减少而使网络拥塞情况得以改善，同时TCP的慢启动时间减少

## 首部压缩

HTTP/1.1并不支持首部压缩，为此spdy和http/2应运而生，两者都是压缩，算法不同。

首部压缩相当于对首部信息进行压缩缓存，只传输不同的部分，提高传输效率。

## 服务端推送

服务端推送是一种在客户端请求之前发送数据的机制。在HTTP/2中，服务器可以对客户端的一个请求发送多个响应。

例如一个请求是由你的主页发起，那么服务器很可能响应主页内容，样式表，脚本文件，logo图片等等，因为它知道客户端需要这些东西。这就有个很大的优势：可以缓存。

## 如何开启http/2

- 浏览器支持。

- 正确开启了https的链接

- nginx配置

```conf
listen 443 ssl http2;
ssl_protocols TLSv1.2;
ssl_ciphers ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256;
```