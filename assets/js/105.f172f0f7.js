(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{306:function(v,_,t){"use strict";t.r(_);var a=t(0),e=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("p",[v._v("总体来说有两个思路。")]),v._v(" "),t("h2",{attrs:{id:"思路一：从日常的前端性能场景出发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思路一：从日常的前端性能场景出发"}},[v._v("#")]),v._v(" 思路一：从日常的前端性能场景出发")]),v._v(" "),t("p",[v._v("性能瓶颈主要出现在三个场景：")]),v._v(" "),t("p",[v._v("1、在开发时每次修改代码要打包几分钟，太慢（开发构建阶段）")]),v._v(" "),t("p",[v._v("2、打开网站，几十秒才看到页面，太慢（资源加载和页面渲染阶段）")]),v._v(" "),t("p",[v._v("3、页面展现后，页面上的动画不流畅。滚动页面或者拖拽元素卡顿感严重，甚至页面会崩溃（操作体验阶段）")]),v._v(" "),t("h3",{attrs:{id:"一、开发构建阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、开发构建阶段"}},[v._v("#")]),v._v(" 一、开发构建阶段")]),v._v(" "),t("ul",[t("li",[t("p",[v._v("并发： 使用多进程打包")])]),v._v(" "),t("li",[t("p",[v._v("打包时利用缓存")])]),v._v(" "),t("li",[t("p",[v._v("打包量要小：缩小文件的搜索范围，减少编译依赖")])])]),v._v(" "),t("h3",{attrs:{id:"二、资源加载阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、资源加载阶段"}},[v._v("#")]),v._v(" 二、资源加载阶段")]),v._v(" "),t("p",[v._v("核心思路为：传输量要小、距离要近、并行传输、资源复用、预先加载。")]),v._v(" "),t("ul",[t("li",[v._v("传输量要小")])]),v._v(" "),t("p",[v._v("1、构建时压缩HTML，压缩合并CSS、JS，压缩图片")]),v._v(" "),t("p",[v._v("2、使用svg sprite或字体图标替代icon图")]),v._v(" "),t("p",[v._v("3、服务端开启gzip")]),v._v(" "),t("p",[v._v("4、构建时使用TreeShaking，减少不必要的代码引入")]),v._v(" "),t("p",[v._v("5、单页应用路由懒加载，减少首次加载的资源体积")]),v._v(" "),t("p",[v._v("6、图片懒加载，组件懒加载")]),v._v(" "),t("ul",[t("li",[v._v("距离要近")])]),v._v(" "),t("p",[v._v("静态资源部署到CDN。")]),v._v(" "),t("ul",[t("li",[v._v("并行传输")])]),v._v(" "),t("p",[v._v("使用 HTTP2.0")]),v._v(" "),t("ul",[t("li",[v._v("资源复用")])]),v._v(" "),t("p",[v._v("1、服务端配置静态资源缓存（HTTP缓存策略 Cache-Control Keep-alive 304 ETag）")]),v._v(" "),t("p",[v._v("2、打包时分包复用")]),v._v(" "),t("ul",[t("li",[v._v("预先加载")])]),v._v(" "),t("p",[v._v("浏览器在空闲的时间预加载 "),t("code",[v._v('<link rel="prefetch" href="url">')])]),v._v(" "),t("h3",{attrs:{id:"三、页面渲染阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、页面渲染阶段"}},[v._v("#")]),v._v(" 三、页面渲染阶段")]),v._v(" "),t("p",[v._v("1、CSS在上，JS在下")]),v._v(" "),t("p",[v._v("2、加载CSS使用link，少用@import")]),v._v(" "),t("p",[v._v("3、不重要的外置引入的JS使用defer或者async属性异步加载")]),v._v(" "),t("h3",{attrs:{id:"四、操作体验阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、操作体验阶段"}},[v._v("#")]),v._v(" 四、操作体验阶段")]),v._v(" "),t("ul",[t("li",[v._v("动画流畅")])]),v._v(" "),t("p",[v._v("1、尽量用 "),t("code",[v._v("transition")]),v._v(" 和 "),t("code",[v._v("animation")]),v._v(" 来实现CSS动画,而不是用JS（运行在主线程对动画的流畅度有影响）。")]),v._v(" "),t("p",[v._v("2、动画尽量用 "),t("code",[v._v("transform")]),v._v(" 和 "),t("code",[v._v("opacity")]),v._v("，无需重绘和回流，性能最好。")]),v._v(" "),t("p",[v._v("3、"),t("code",[v._v("translateZ/translate3d")]),v._v(" 开启硬件加速。")]),v._v(" "),t("p",[v._v("4、JS动画使用 "),t("code",[v._v("requestAnimationFrame")]),v._v(" 替代 "),t("code",[v._v("setInterval")]),v._v("。")]),v._v(" "),t("ul",[t("li",[v._v("滚动、移动、操作顺畅")])]),v._v(" "),t("p",[v._v("1、DOM操作要少（虚拟长列表、DOM diff）。")]),v._v(" "),t("p",[v._v("2、高频操作使用防抖和节流。")]),v._v(" "),t("ul",[t("li",[v._v("密集型计算")])]),v._v(" "),t("p",[v._v("密集型计算交给 "),t("code",[v._v("WebWorker")]),v._v(" 并发处理。")]),v._v(" "),t("p",[t("img",{attrs:{src:"/images/web_optimize.jpg",alt:"web_optimize"}})]),v._v(" "),t("h2",{attrs:{id:"思路二：从生活角度聊前端性能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思路二：从生活角度聊前端性能"}},[v._v("#")]),v._v(" 思路二：从生活角度聊前端性能")]),v._v(" "),t("p",[v._v("加入公司的项目尽可能的在短期时间内上线，在现有团队不加班的前提下如何实现？")]),v._v(" "),t("p",[v._v("1、压缩需求，迭代开发————压缩")]),v._v(" "),t("p",[v._v("2、多用旧轮子（ 代码、方案、架构），少造新轮子————缓存")]),v._v(" "),t("p",[v._v("3、增加人手————并发")]),v._v(" "),t("p",[v._v("和前端性能优化做对应：")]),v._v(" "),t("p",[v._v("1、压缩需求，迭代开发：静态资源压缩合并，Gzip，懒加载，打包时缩小文件搜索范围")]),v._v(" "),t("p",[v._v("2、多用旧轮子少造新轮子：资源请求时HTTP缓存，开发打包时配置使用缓存，打包时配置分包复用")]),v._v(" "),t("p",[v._v("3、增加人手：资源请求时使用HTTP2.0实现并发请求、开发打包时配置使用并发能力、WebWorker")]),v._v(" "),t("h2",{attrs:{id:"六字箴言：压缩、缓存、并发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六字箴言：压缩、缓存、并发"}},[v._v("#")]),v._v(" 六字箴言：压缩、缓存、并发")])])}),[],!1,null,null,null);_.default=e.exports}}]);